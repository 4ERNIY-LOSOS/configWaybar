# configWaybar

## Обзор стандартных модулей Waybar

Ниже представлен обзор стандартных модулей Waybar с расширенным описанием их назначения, пользы для пользователя и ключевых возможностей, основанный на официальной документации.

### Основные/Общие модули:

*   **`Clock`**:
    *   **Назначение:** Отображение текущего времени и даты.
    *   **Для чего нужен:** Позволяет пользователю легко отслеживать текущее время, дату, а также просматривать календарь. Полезен для планирования и общей осведомленности о времени.
    *   **Как работает/ключевые возможности:** Считывает системное время. Поддерживает гибкое форматирование вывода с использованием спецификаторов `strftime` (например, `%H:%M`, `%A, %d %B %Y`). Позволяет настраивать часовой пояс (`timezone`) и локаль (`locale`). Может отображать календарь во всплывающей подсказке (`tooltip-format` с `{calendar}`), с навигацией по месяцам/годам.

*   **`Battery`**:
    *   **Назначение:** Мониторинг состояния батареи(й) системы.
    *   **Для чего нужен:** Информирует пользователя об уровне заряда основной батареи ноутбука, а также, при соответствующей настройке (`bat` или `upower` модуль), о заряде подключенных беспроводных устройств. Помогает вовремя подключить зарядное устройство или сохранить работу.
    *   **Как работает/ключевые возможности:** Считывает информацию из `/sys/class/power_supply/`. Позволяет отслеживать несколько батарей (например, `battery#bat2`). Поддерживает различные форматы для состояний (зарядка, разрядка, подключено к сети, полный заряд - `format-charging`, `format-plugged`, `format-full`). Отображает иконки в зависимости от уровня заряда (`format-icons`) и пользовательские состояния (`states` вроде `warning`, `critical`). Может показывать примерное время до разрядки/зарядки (`{time}`).

*   **`CPU`**:
    *   **Назначение:** Отображение загрузки центрального процессора.
    *   **Для чего нужен:** Позволяет пользователю отслеживать, насколько интенсивно используется процессор, что может помочь выявить ресурсоемкие приложения или общую производительность системы.
    *   **Как работает/ключевые возможности:** Показывает общую загрузку CPU (`{usage}`), загрузку каждого ядра (`{usageN}`), среднюю, максимальную и минимальную тактовую частоту (`{avg_frequency}`, `{max_frequency}`, `{min_frequency}`). Поддерживает иконки и числовые значения.

*   **`Memory`**:
    *   **Назначение:** Отображение использования оперативной памяти (RAM) и файла подкачки (swap).
    *   **Для чего нужен:** Информирует пользователя о том, сколько памяти используется системой и приложениями. Помогает понять, не заканчивается ли свободная память, что может вести к замедлению работы.
    *   **Как работает/ключевые возможности:** Показывает процент использования RAM (`{percentage}`), процент использования swap (`{swapPercentage}`), а также абсолютные значения общего, использованного и доступного объема RAM и swap (например, `{used}`, `{total}`, `{avail}`).

*   **`Temperature`**:
    *   **Назначение:** Отображение температуры системных компонентов.
    *   **Для чего нужен:** Позволяет контролировать температуру критически важных компонентов, таких как процессор или видеокарта, чтобы избежать перегрева.
    *   **Как работает/ключевые возможности:** Считывает данные из термальных зон (`/sys/class/thermal/thermal_zoneX`) или напрямую из файлов `hwmon` (например, `/sys/class/hwmon/hwmonX/tempX_input`). Позволяет задать критический порог (`critical-threshold`) и специальный формат для него (`format-critical`). Отображает температуру в Цельсиях (`{temperatureC}`), Фаренгейтах (`{temperatureF}`) или Кельвинах (`{temperatureK}`).

*   **`Network`**:
    *   **Назначение:** Информация о сетевых подключениях.
    *   **Для чего нужен:** Отображает статус текущего сетевого подключения (Wi-Fi, Ethernet), имя сети (SSID), уровень сигнала, IP-адрес и другую релевантную информацию. Позволяет быстро оценить состояние сети.
    *   **Как работает/ключевые возможности:** Автоматически определяет активный интерфейс или позволяет указать его вручную (`interface`). Поддерживает разные форматы для Wi-Fi (`format-wifi`), Ethernet (`format-ethernet`), отключенного состояния (`format-disconnected`) и т.д. Может отображать IP-адрес (`{ipaddr}`), шлюз (`{gwaddr}`), SSID (`{essid}`), уровень сигнала (`{signalStrength}`), текущую скорость загрузки/отдачи (`{bandwidthDownBytes}`, `{bandwidthUpBytes}`).

*   **`Disk`**:
    *   **Назначение:** Отслеживание использования дискового пространства.
    *   **Для чего нужен:** Показывает, сколько свободного места осталось на выбранных разделах диска, помогая избежать их переполнения.
    *   **Как работает/ключевые возможности:** Мониторит указанную точку монтирования (`path`). Отображает свободное/использованное пространство в процентах (`{percentage_free}`, `{percentage_used}`) или абсолютных значениях с автоматическим выбором единиц (`{total}`, `{used}`, `{free}`) или с фиксированной единицей (`{specific_total}`, `unit: "GB"`).

*   **`Backlight`**:
    *   **Назначение:** Отображение и управление уровнем яркости экрана.
    *   **Для чего нужен:** Позволяет быстро узнать текущий уровень яркости и изменить его, например, с помощью прокрутки колеса мыши над модулем.
    *   **Как работает/ключевые возможности:** Взаимодействует с системой управления подсветкой. Отображает яркость в процентах (`{percent}`) и/или иконкой (`{icon}`). Позволяет настроить шаг изменения яркости при прокрутке (`scroll-step`).

*   **`Backlight Slider`**:
    *   **Назначение:** Предоставление ползунка для управления яркостью экрана.
    *   **Для чего нужен:** Более наглядный и интерактивный способ изменения яркости экрана путем перетаскивания ползунка.
    *   **Как работает/ключевые возможности:** Создает виджет-ползунок. Требует CSS-стилизации (особенно `min-width`/`min-height` для `trough` и `highlight` частей) для корректного отображения и работы.

*   **`Idle Inhibitor`**:
    *   **Назначение:** Предотвращение автоматического перехода системы в режим ожидания.
    *   **Для чего нужен:** Полезен во время презентаций, просмотра фильмов или других ситуаций, когда нежелательно, чтобы экран гас или система блокировалась из-за бездействия.
    *   **Как работает/ключевые возможности:** Переключает состояние "запрета бездействия". Отображает текущий статус (`{status}`) и/или иконку (`{icon}`). Клик по модулю обычно переключает состояние.

*   **`Tray`**:
    *   **Назначение:** Отображение иконок системного трея.
    *   **Для чего нужен:** Предоставляет доступ к фоновым приложениям и их функциям через стандартные иконки трея.
    *   **Как работает/ключевые возможности:** Реализует протокол системного трея. Позволяет настроить размер иконок (`icon-size`) и отступы (`spacing`). Отмечен как находящийся в бета-версии.

*   **`Custom` (`custom/<name>`)**:
    *   **Назначение:** Отображение вывода пользовательских скриптов.
    *   **Для чего нужен:** Максимальная гибкость. Позволяет создавать любые индикаторы, которых нет среди стандартных модулей, путем написания небольших скриптов на любом языке.
    *   **Как работает/ключевые возможности:** Периодически или по сигналу выполняет указанный скрипт (`exec`). Скрипт может возвращать данные в простом текстовом формате (каждое значение на новой строке для текста, всплывающей подсказки и CSS-класса) или в формате JSON (поля `text`, `alt`, `tooltip`, `class`, `percentage`). Поддерживает иконки, всплывающие подсказки, CSS-классы.

*   **`Image`**:
    *   **Назначение:** Отображение статического или динамически изменяемого изображения.
    *   **Для чего нужен:** Может использоваться для отображения логотипов, обложек альбомов (если путь к изображению генерируется скриптом) или других графических элементов.
    *   **Как работает/ключевые возможности:** Загружает изображение из указанного пути (`path`) или из пути, возвращаемого скриптом (`exec`). Позволяет задать размер (`size`).

*   **`Group` (`group/<name>`)**:
    *   **Назначение:** Группировка нескольких модулей вместе.
    *   **Для чего нужен:** Позволяет организовать модули в компактные блоки, например, расположить несколько индикаторов вертикально на горизонтальной панели. Может создавать "выезжающие" панели (`drawer`), которые показывают дополнительные модули при наведении.
    *   **Как работает/ключевые возможности:** Задается ориентация (`orientation`: horizontal, vertical, inherit, orthogonal) и список вложенных модулей (`modules`). Функция `drawer` скрывает часть модулей до наведения/клика.

*   **`CFFI` (`cffi/<name>`)**:
    *   **Назначение:** Интеграция с внешними библиотеками через C Foreign Function Interface.
    *   **Для чего нужен:** Позволяет разработчикам создавать сложные, высокопроизводительные модули на других языках программирования (C, Rust и т.д.), имея прямой доступ к GTK виджету.
    *   **Как работает/ключевые возможности:** Загружает указанную динамическую библиотеку (`module_path`), которая должна реализовывать определенный API для взаимодействия с Waybar.

### Аудио модули:

*   **`PulseAudio`**:
    *   **Назначение:** Управление и отображение состояния звукового сервера PulseAudio.
    *   **Для чего нужен:** Позволяет видеть текущий уровень громкости, статус Mute, тип подключенного устройства (наушники, Bluetooth и т.д.) и управлять громкостью.
    *   **Как работает/ключевые возможности:** Взаимодействует с PulseAudio. Поддерживает различные форматы для разных состояний и типов устройств, иконки, отображение состояния микрофона. Позволяет запускать команды по клику (например, `pavucontrol`).
*   **`PulseAudio Slider`**:
    *   **Назначение:** Интерактивный ползунок для управления громкостью PulseAudio.
    *   **Для чего нужен:** Предоставляет визуальный и интуитивный способ изменения уровня громкости.
    *   **Как работает/ключевые возможности:** Создает GTK-виджет ползунка, связанный с громкостью PulseAudio. Требует CSS-стилизации для корректного отображения.
*   **`WirePlumber`**:
    *   **Назначение:** Управление громкостью и отображение состояния через WirePlumber.
    *   **Для чего нужен:** Альтернатива модулю PulseAudio для систем, использующих PipeWire с WirePlumber в качестве сессионного менеджера.
    *   **Как работает/ключевые возможности:** Взаимодействует с WirePlumber. Показывает уровень громкости (`{volume}`), имя узла (`{node_name}`), статус Mute.
*   **`JACK`**:
    *   **Назначение:** Информация о состоянии звукового сервера JACK.
    *   **Для чего нужен:** Для пользователей профессионального аудио ПО, работающего через JACK, позволяет отслеживать параметры сервера, такие как загрузка DSP, xruns, размер буфера и задержку.
    *   **Как работает/ключевые возможности:** Подключается к JACK API (поддерживаются JACK2 и PipeWire-JACK).
*   **`Sndio`**:
    *   **Назначение:** Управление громкостью и отображение состояния звукового сервера sndio.
    *   **Для чего нужен:** Для пользователей систем OpenBSD или других ОС, использующих sndio.
    *   **Как работает/ключевые возможности:** Взаимодействует с sndio. Показывает громкость (`{volume}` или `{raw_volume}`).
*   **`Cava`**:
    *   **Назначение:** Интеграция с аудиовизуализатором Cava.
    *   **Для чего нужен:** Отображает графический спектр (эквалайзер) воспроизводимого звука прямо на панели.
    *   **Как работает/ключевые возможности:** Запускает и взаимодействует с процессом Cava. Требует установленного Cava и его библиотек. Множество настроек, повторяющих конфигурацию Cava.

### Медиаплееры:

*   **`MPD (Music Player Daemon)`**:
    *   **Назначение:** Отображение информации и управление MPD.
    *   **Для чего нужен:** Позволяет видеть информацию о текущем треке (исполнитель, альбом, название, время), статусе плеера (играет, пауза, стоп) и управлять воспроизведением.
    *   **Как работает/ключевые возможности:** Подключается к серверу MPD. Отображает теги трека, время, статус, иконки для режимов (consume, random, repeat, single).
*   **`MPRIS`**:
    *   **Назначение:** Управление и отображение информации от медиаплееров, поддерживающих стандарт MPRIS.
    *   **Для чего нужен:** Универсальный способ взаимодействия с различными медиаплеерами (например, Spotify, VLC, Elisa, браузеры с медиа-контентом). Показывает информацию о треке, статус плеера, позволяет управлять воспроизведением.
    *   **Как работает/ключевые возможности:** Использует `libplayerctl`. Отображает имя плеера, статус, информацию о треке. Поддерживает "динамический" формат (`{dynamic}`), который адаптируется под доступную информацию.

### Модули, специфичные для Оконных Менеджеров (WM):

*   **`Sway`**: (`sway/workspaces`, `sway/window`, `sway/mode`, `sway/language`)
    *   **Назначение:** Интеграция с композитором Sway.
    *   **Для чего нужен:** Предоставляет специфичные для Sway функции: отображение рабочих столов, заголовка активного окна, текущего режима привязок (binding mode) и раскладки клавиатуры.
    *   **Как работает/ключевые возможности:** Взаимодействует с Sway через IPC. Функциональность аналогична модулям для Hyprland, но адаптирована для Sway.
*   **`Hyprland`**: (`hyprland/workspaces`, `hyprland/window`, `hyprland/language`, `hyprland/submap`, `hyprland/windowcount`)
    *   **Назначение:** Глубокая интеграция с композитором Hyprland.
    *   **Для чего нужен:** Отображение рабочих столов с иконками окон, заголовка активного окна (возможно, с иконкой приложения), раскладки клавиатуры, активного "submap" (специального режима клавиш в Hyprland) и количества окон на рабочем столе.
    *   **Как работает/ключевые возможности:** Взаимодействует с Hyprland через его IPC-интерфейс.
*   **`River`**: (`river/mode`, `river/tags`, `river/window`, `river/layout`)
    *   **Назначение:** Интеграция с композитором River.
    *   **Для чего нужен:** Отображение текущего режима маппинга, состояния тегов (аналог рабочих столов), заголовка активного окна и текущего лейаута River.
    *   **Как работает/ключевые возможности:** Взаимодействует с River через его специфические механизмы.
*   **`Dwl`**: (`dwl/tags`, `dwl/window`)
    *   **Назначение:** Интеграция с композитором Dwl.
    *   **Для чего нужен:** Отображение состояния тегов и заголовка активного окна в Dwl.
    *   **Как работает/ключевые возможности:** Требует применения специального IPC патча к Dwl.
*   **`Niri`**: (`niri/workspaces`, `niri/window`, `niri/language`)
    *   **Назначение:** Интеграция с композитором Niri.
    *   **Для чего нужен:** Отображение рабочих столов, заголовка активного окна и раскладки клавиатуры в Niri.
    *   **Как работает/ключевые возможности:** Взаимодействует с Niri (требуется версия Niri >= 0.1.9).
*   **`Workspaces (wlr/workspaces)`**:
    *   **Назначение:** Общий модуль для отображения рабочих столов.
    *   **Для чего нужен:** Предназначен для композиторов, поддерживающих протокол `ext-workspace-v1`.
    *   **Как работает/ключевые возможности:** Экспериментальная функция, требует сборки Waybar с флагом `-Dexperimental=true`. Функционал похож на специфичные для WM модули рабочих столов.

### Другие системные/специфичные модули:

*   **`Keyboard State`**:
    *   **Назначение:** Отображение состояния клавиш Num Lock, Caps Lock и Scroll Lock.
    *   **Для чего нужен:** Информирует пользователя о текущем состоянии этих клавиш-переключателей.
    *   **Как работает/ключевые возможности:** Считывает состояние клавиатуры через libevdev. Требует, чтобы пользователь состоял в группе `input`.
*   **`Gamemode`**:
    *   **Назначение:** Индикация статуса Feral Gamemode.
    *   **Для чего нужен:** Показывает, активен ли игровой режим (оптимизации системы для игр) и сколько игр его используют.
    *   **Как работает/ключевые возможности:** Взаимодействует с демоном GameMode.
*   **`Power Profiles Daemon`**:
    *   **Назначение:** Отображение и управление профилями энергосбережения.
    *   **Для чего нужен:** Позволяет видеть текущий профиль (`performance`, `balanced`, `power-saver`) и переключаться между ними кликом мыши.
    *   **Как работает/ключевые возможности:** Взаимодействует с системным сервисом `power-profiles-daemon`.
*   **`Privacy`**:
    *   **Назначение:** Индикация использования приватных ресурсов.
    *   **Для чего нужен:** Уведомляет пользователя, если какое-либо приложение активно использует камеру (screenshare), микрофон (audio-in) или воспроизводит звук (audio-out). Повышает осведомленность о приватности.
    *   **Как работает/ключевые возможности:** Мониторит использование соответствующих ресурсов. Позволяет настроить иконки и игнорировать определенные приложения.
*   **`Systemd failed units`**:
    *   **Назначение:** Отображение количества "упавших" сервисов systemd.
    *   **Для чего нужен:** Сигнализирует о проблемах в системе, если какие-то важные службы не запустились или работают некорректно.
    *   **Как работает/ключевые возможности:** Проверяет состояние юнитов systemd (системных и/или пользовательских). Может скрываться, если все в порядке.
*   **`Taskbar (wlr/taskbar)`**:
    *   **Назначение:** Отображение панели задач с запущенными приложениями.
    *   **Для чего нужен:** Предоставляет привычный интерфейс для переключения между окнами и управления ими.
    *   **Как работает/ключевые возможности:** Использует протокол `foreign-toplevel-manager` (требуется поддержка со стороны композитора). Отображает иконки и заголовки приложений, позволяет выполнять действия по клику (активировать, свернуть, закрыть).
*   **`UPower`**:
    *   **Назначение:** Информация о батареях и других устройствах питания через UPower.
    *   **Для чего нужен:** Более универсальный способ получения информации о питании, чем модуль `battery`, так как может отображать состояние не только основной батареи, но и подключенных по Bluetooth устройств (если они репортят свой заряд через UPower).
    *   **Как работает/ключевые возможности:** Взаимодействует с сервисом UPower через D-Bus. Можно указать конкретный путь к устройству (`native-path`).
*   **`User`**:
    *   **Назначение:** Отображение информации о текущем пользователе и времени работы системы.
    *   **Для чего нужен:** Показывает имя пользователя, его аватар и как долго система работает с момента последней загрузки.
    *   **Как работает/ключевые возможности:** Считывает системную информацию. Позволяет настроить путь к аватару (`avatar`).
*   **`Load`**:
    *   **Назначение:** Отображение средней загрузки системы (load average).
    *   **Для чего нужен:** Дает представление об общей нагрузке на систему за последние 1, 5 и 15 минут.
    *   **Как работает/ключевые возможности:** Считывает системные значения load average.

### Разработка модулей:

*   **`Writing Modules`**: (Страница документации)
    *   **Назначение:** Руководство для разработчиков по созданию собственных встроенных модулей для Waybar.
    *   **Для чего нужен:** Для тех, кто хочет расширить функциональность Waybar модулем, написанным на C++.
    *   **Как работает/ключевые возможности:** Описывает базовые классы Waybar (ALabel, AModule), структуру файлов, процесс сборки и интеграции нового модуля, а также основные принципы взаимодействия модуля с ядром Waybar (обновление данных, реакция на события).